{% extends base_template %}

<!-- i18n and static are Django template tags. They are used to load the i18n and static template tags. The i18n template tag is used to mark strings for translation. -->
<!-- The static is a template tag that is used to load the static template tag library. This library provides a way to reference static files, such as CSS, JavaScript, or image files, which are not tied to a particular instance of a model in your Django app. -->
{% load i18n static %}


{# title #}
{% block title %}Front page{% endblock %}

{% block dynamic_head_content %}

{% endblock %}


<!-- headline for the page -->
{% block headline %}Frontpage{% endblock %}

{% block main-content %}


<div class="container my-4">    
    <div class="container my-4">
        <!-- New button to generate a new token -->
        <i class="bi bi-question-circle-fill" data-bs-toggle="tooltip" data-bs-placement="right" title="Forexample if added yourself to a group after you login. Cache remains 15 minutes" data-bs-html="true"></i>
        <button id="deleteADGroupCacheBtn" class="btn btn-primary">
            Delete Cache <span id="loadingSpinnerDeleteADGroupCacheBtn" class="spinner-border spinner-border-sm" role="status" aria-hidden="true" style="display: none;"></span>
        </button>
    </div>
    <div class="container my-4">
        <!-- New button to generate a new token -->
        <i class="bi bi-question-circle-fill" data-bs-toggle="tooltip" data-bs-placement="right" title="The token will only be displayed once!" data-bs-html="true"></i>
        <button id="generateTokenBtn" class="btn btn-primary">
            Generate New Token
        </button>
    </div>

    <div class="container my-4">
        <h2>My Accessible Endpoints</h2>
        <div class="table-responsive">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Endpoint</th>
                        <th scope="col"><i class="bi bi-question-circle-fill" data-bs-toggle="tooltip" data-bs-placement="right" title="These groups gives you permission to the endpoint" data-bs-html="true"></i> AD Group</th>
                    </tr>
                </thead>
                <tbody>
                    {% for endpoint in user_endpoints %}
                    <tr>
                        <th scope="row">{{ forloop.counter }}</th>
                        <td>{{ endpoint.method }} {{ endpoint.path }}</td>
                        <td>
                            {% for ad_group in endpoint.ad_groups.all %}  <!-- Adjust this to access the endpoint's specific groups -->
                                {{ ad_group.cn }}
                                {% if not forloop.last %}, {% endif %}
                            {% endfor %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
                
            </table>
        </div>
    </div>

    <div class="container my-4">
        <h2>My Accessible Ressources</h2>
    </div>  

</div>
    <script src="{% static 'myview/js/frontpage.js' %}" defer></script>
    <link rel="stylesheet" type="text/css" media="all" href="{% static 'myview/css/frontpage.css' %}" />
{% endblock %}


